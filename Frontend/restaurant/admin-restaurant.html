<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Qu·∫£n l√Ω Nh√† h√†ng</title>
    <link rel="stylesheet" href="../css/admin.css">
    <style>
        .menu-thumb { width: 50px; height: 50px; border-radius: 5px; object-fit: cover; border: 1px solid #e3e6f0; }
        .filter-select { padding: 8px; border: 1px solid #d1d3e2; border-radius: 5px; margin-right: 10px; }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="sidebar-header">
            üçî Admin Panel
        </div>
        <nav class="sidebar-nav">
            <a href="../admin/admin.html" class="nav-item">üìä Dashboard</a>
            <a href="admin-restaurant.html" class="nav-item active">üè™ Nh√† h√†ng & M√≥n ƒÉn</a>
            <a href="../customer/admin-customer.html" class="nav-item">üë• Kh√°ch h√†ng</a>
            <a href="../payment/admin-payment.html" class="nav-item">üí≥ Thanh to√°n</a>
            <a href="../order/admin-order.html" class="nav-item">üì¶ ƒê∆°n h√†ng</a>
            <a href="../delivery/admin-delivery.html" class="nav-item">üöö Giao h√†ng</a>
            <a href="../index.html" class="nav-item logout">‚¨ÖÔ∏è V·ªÅ trang ch·ªß</a>
        </nav>
    </aside>

    <main class="main-content">
        <header class="content-header">
            <h1>Qu·∫£n l√Ω Nh√† h√†ng & M√≥n ƒÉn</h1>
            <div class="user-info">üë§ Admin</div>
        </header>

        <div class="content-body">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('restaurant')">üè™ Nh√† h√†ng</button>
                <button class="tab-btn" onclick="switchTab('menu')">üçΩÔ∏è M√≥n ƒÉn</button>
            </div>

            <div id="tab-restaurant" class="tab-content active">
                <div class="card">
                    <div class="section-header">
                        <h2>Danh s√°ch Nh√† h√†ng</h2>
                        <button class="btn-primary" onclick="openModal('resModal')">‚ûï Th√™m nh√† h√†ng</button>
                    </div>
                    <div class="search-bar">
                        <input type="text" id="resSearch" placeholder="üîç T√¨m ki·∫øm nh√† h√†ng..." onkeyup="searchRestaurant()">
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>T√™n nh√† h√†ng</th>
                                    <th>M√¥ t·∫£</th>
                                    <th>ƒê·ªãa ch·ªâ</th>
                                    <th>S·ªë ƒëi·ªán tho·∫°i</th>
                                    <th>ƒê√°nh gi√° TB</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="resTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="tab-menu" class="tab-content">
                <div class="card">
                    <div class="section-header">
                        <h2>Danh s√°ch M√≥n ƒÉn</h2>
                        <button class="btn-primary" onclick="openModal('dishModal')">‚ûï Th√™m m√≥n ƒÉn</button>
                    </div>
                    <div class="search-bar">
                        <div style="display:flex; align-items:center;">
                            <select id="resFilter" class="filter-select" onchange="loadDishes()">
                                <option value="">-- Ch·ªçn Nh√† h√†ng --</option>
                            </select>
                            <input type="text" id="dishSearch" placeholder="üîç T√¨m t√™n m√≥n..." style="flex:1">
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>·∫¢nh</th>
                                    <th>T√™n m√≥n</th>
                                    <th>M√¥ t·∫£</th>
                                    <th>Gi√°</th>
                                    <th>Danh m·ª•c</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody id="dishTableBody">
                                <tr><td colspan="8" style="text-align:center; padding:20px;">Vui l√≤ng ch·ªçn nh√† h√†ng ƒë·ªÉ xem th·ª±c ƒë∆°n.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Nh√† h√†ng -->
    <div class="modal" id="resModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Th√™m Nh√† H√†ng M·ªõi</h3>
                <button onclick="closeModal('resModal')" style="border:none;background:none;font-size:1.2rem;cursor:pointer;">‚úï</button>
            </div>
            <div class="modal-body">
                <form id="resForm">
                    <div class="form-group">
                        <label>T√™n nh√† h√†ng <span style="color:red">*</span></label>
                        <input type="text" id="resName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>M√¥ t·∫£</label>
                        <textarea id="resDesc" class="form-control" rows="3" placeholder="M√¥ t·∫£ ng·∫Øn v·ªÅ nh√† h√†ng..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>ƒê·ªãa ch·ªâ <span style="color:red">*</span></label>
                        <input type="text" id="resAddr" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>S·ªë ƒëi·ªán tho·∫°i <span style="color:red">*</span></label>
                        <input type="text" id="resPhone" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Tr·∫°ng th√°i</label>
                        <select id="resStatus" class="form-control">
                            <option value="OPEN">OPEN - ƒêang m·ªü c·ª≠a</option>
                            <option value="CLOSED">CLOSED - ƒê√£ ƒë√≥ng c·ª≠a</option>
                            <option value="BUSY">BUSY - ƒêang b·∫≠n</option>
                        </select>
                    </div>
                    <div style="text-align:right; margin-top: 20px;">
                        <button type="button" class="btn-secondary" onclick="closeModal('resModal')">H·ªßy</button>
                        <button type="submit" class="btn-primary">L∆∞u l·∫°i</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal M√≥n ƒÉn -->
    <div class="modal" id="dishModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Th√™m M√≥n ƒÇn</h3>
                <button onclick="closeModal('dishModal')" style="border:none;background:none;font-size:1.2rem;cursor:pointer;">‚úï</button>
            </div>
            <div class="modal-body">
                <form id="dishForm">
                    <div class="form-group">
                        <label>Ch·ªçn Nh√† h√†ng <span style="color:red">*</span></label>
                        <select id="dishResSelect" class="form-control" required></select>
                    </div>
                    <div class="form-group">
                        <label>T√™n m√≥n <span style="color:red">*</span></label>
                        <input type="text" id="dishName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>M√¥ t·∫£</label>
                        <textarea id="dishDesc" class="form-control" rows="3" placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ m√≥n ƒÉn..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Danh m·ª•c</label>
                        <input type="text" id="dishCategory" class="form-control" placeholder="V√≠ d·ª•: M√≥n ch√≠nh, Khai v·ªã, Tr√°ng mi·ªáng...">
                    </div>
                    <div class="form-group">
                        <label>Gi√° (VNƒê) <span style="color:red">*</span></label>
                        <input type="number" id="dishPrice" class="form-control" required min="0" step="1000">
                    </div>
                    <div class="form-group">
                        <label>Link ·∫¢nh</label>
                        <input type="url" id="dishImg" class="form-control" placeholder="https://...">
                    </div>
                    <div class="form-group">
                        <label>Tr·∫°ng th√°i</label>
                        <select id="dishAvailable" class="form-control">
                            <option value="true">C√≤n h√†ng</option>
                            <option value="false">H·∫øt h√†ng</option>
                        </select>
                    </div>
                    <div style="text-align:right; margin-top: 20px;">
                        <button type="button" class="btn-secondary" onclick="closeModal('dishModal')">H·ªßy</button>
                        <button type="submit" class="btn-primary">L∆∞u l·∫°i</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="closeAllModals()"></div>

    <script src="../js/api.js"></script>
    <script src="restaurant.js"></script>
</body>
</html>